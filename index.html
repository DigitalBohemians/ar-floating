<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>
  <style>body{margin:0;overflow:hidden}</style>
</head>
<body>
  <a-scene
    embedded
    vr-mode-ui="enabled:false"
    renderer="alpha:true; antialias:true"
    arjs="sourceType: webcam; debugUIEnabled:false;"
  >
    <a-assets>
      <img id="img0" src="IMG_5410.jpeg">
      <img id="img1" src="IMG_4431.jpg">
      <img id="img2" src="IMG_4430.jpg">
      <img id="img3" src="IMG_4429.jpg">
    </a-assets>

    <a-entity id="gallery" visible="false">
      <a-image id="slide" src="#img0" width="1.5" height="1"></a-image>
    </a-entity>

    <a-entity id="cam" camera></a-entity>
  </a-scene>

  <script>
    const images = ['#img0','#img1','#img2','#img3'];
    let current = 0;
    setInterval(() => {
      current = (current + 1) % images.length;
      document.getElementById('slide').setAttribute('src', images[current]);
    }, 3000);

    function placeInFront(distanceMeters = 2.0) {
      const camEl = document.getElementById('cam');
      const galleryEl = document.getElementById('gallery');
      const camObj = camEl.object3D;
      const pos = new THREE.Vector3();
      const dir = new THREE.Vector3();
      camObj.getWorldPosition(pos);
      camObj.getWorldDirection(dir);
      const target = pos.clone().add(dir.multiplyScalar(distanceMeters));
      galleryEl.object3D.position.copy(target);
      galleryEl.object3D.lookAt(pos);
      galleryEl.setAttribute('visible', 'true');
    }

    const btn = document.createElement('button');
    btn.innerText = 'â–¶ Platzieren';
    btn.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px 40px;font-size:22px;z-index:999;border:none;border-radius:12px;background:white;font-weight:bold;';
    document.body.appendChild(btn);

    btn.addEventListener('click', () => {
      btn.style.display = 'none';
      setTimeout(() => placeInFront(2.0), 500);
    });

    document.addEventListener('click', (e) => {
      if (e.target === btn) return;
      placeInFront(2.0);
    });
  </script>
</body>
</html>
